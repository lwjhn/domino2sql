{
  "sql_url": "jdbc:dm://192.168.210.77:5236/SFTOA?connectTimeout=3000&socketTimeout=60000&useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC",
  "sql_username": "SFTOA",
  "sql_password": "123456789",
  "sql_driver": "dm.jdbc.driver.DmDriver",
  "driver_manager_log": false,
  "options": [
    {
      "enable": true,
      "version": "1.0.0",
      "ftppath": "/FTP_XC/",
      "domino_server": "OA/SRV/FJSF",
      "domino_queries": [
        {
          "enable": true,
          "error_continue": true,
          "domino_query": "Form=\"FlowForm\" & MSSDATABASE!=\"\"  & @Text(@DocumentUniqueID) = \"5C67882BCCB59510482588250011D2B0\" ",
          "domino_dbpath": "egov/stationerynew.nsf",
          "update_mode_no_insert": false
        }
      ],
      "before_action_driver": "com.lwjhn.domino2sql.driver.BeforeActionDriverFormula",
      "on_action_driver": "com.lwjhn.domino2sql.driver.OnActionExtensionDocuments",
      "after_action_driver": "com.lwjhn.domino2sql.driver.AfterActionDriverFormula",
      "extended_options": {
        "before_sql_formula": "\"DELETE FROM EGOV_GOODS_USE_RECORD WHERE APPLY_GOODS_ID = '\"+@Text(@DocumentUniqueID)+\"'\";",
        "after_sql_formula": "DOMINO_PID := @Text(@DocumentUniqueID);\nret:=\"DELETE FROM EGOV_GOODS_USE_RECORD WHERE APPLY_GOODS_ID = '\"+@Text(@DocumentUniqueID)+\"';\" + @Char(10);\nret:=ret+\"UPDATE EGOV_OPINION SET DOC_ID = '\"+DOMINO_PID+\"' WHERE DOMINO_PID ='\"+DOMINO_PID+\"';\" + @Char(10);\n@For(n := 1; n<= @Elements(Type); n := n + 1;\n\t@Do(\n\t\tret:=ret + \"INSERT INTO EGOV_GOODS_USE_RECORD (ID, APPLY_GOODS_ID, GOODS_TYPE, UNIT) \n\t\t\t\t\tVALUES(newid(), '\"+DOMINO_PID+\"', '\"+Type[n]+\"','\"+@If(@Elements(Unit)>=n;Unit[n];\"\")+\"');\" + @Char(10)\n\t)\n);\nret",
        "children": [
          {
            "enable": true,
            "vesion": "1.0.0",
            "ftppath": "/FTP_XC/",
            "domino_server": "@If(MSSSERVER=\"\";@ServerName;MSSSERVER)",
            "domino_dbpath": "@If(MSSOpinion=!\"\";MSSOpinion;OpinionlogDatabase!=\"\";OpinionlogDatabase;@ServerName)",
            "domino_query": "\"Form=\\\"Opinion\\\" & PARENTUNID=\\\"\"+@Text(@DocumentUniqueID)+\"\\\"\"",
            "after_action_driver": "com.lwjhn.domino2sql.driver.ActionShowLog",
            "update_mode_no_insert": false,
            "sql_update_primary_key": {
              "sql_name": "DOMINO_ID",
              "domino_formula": "@Text(@DocumentUniqueID)",
              "jdbc_type": "VARCHAR",
              "scale_length": 0
            },
            "sql_table": "EGOV_OPINION",
            "sql_field_others": [
              {
                "sql_name": "ID",
                "domino_name": "ArcXC_UUID_16",
                "jdbc_type": "VARCHAR",
                "scale_length": 0
              },
              {
                "sql_name": "DOMINO_ID",
                "domino_formula": "@Text(@DocumentUniqueID)",
                "jdbc_type": "VARCHAR",
                "scale_length": 0
              },
              {
                "sql_name": "DOC_ID",
                "domino_formula": "@Nothing",
                "jdbc_type": "VARCHAR",
                "scale_length": 0
              },
              {
                "sql_name": "DOMINO_PID",
                "domino_name": "PARENTUNID",
                "jdbc_type": "VARCHAR",
                "scale_length": 0
              },
              {
                "sql_name": "OPINION_CODE",
                "domino_name": "OPINIONFIELD",
                "jdbc_type": "VARCHAR",
                "scale_length": 0
              },
              {
                "sql_name": "OPINION_CODE_NAME",
                "domino_name": "OPINIONTYPE",
                "jdbc_type": "VARCHAR",
                "scale_length": 0
              },
              {
                "sql_name": "OPINION_CONTENT",
                "domino_name": "OPINIONBODY",
                "jdbc_type": "VARCHAR",
                "scale_length": 0
              },
              {
                "sql_name": "OPINION_USER",
                "domino_name": "OPINIONUSERTITLE",
                "jdbc_type": "VARCHAR",
                "scale_length": 0
              },
              {
                "sql_name": "OPINION_USER_NO",
                "domino_name": "OPINIONUSER",
                "jdbc_type": "VARCHAR",
                "scale_length": 0
              },
              {
                "sql_name": "OPINION_DEPT",
                "domino_name": "OPINIONDEPTTITLE",
                "jdbc_type": "VARCHAR",
                "scale_length": 0
              },
              {
                "sql_name": "OPINION_DEPT_NO",
                "domino_name": "OPINIONDEPT",
                "jdbc_type": "VARCHAR",
                "scale_length": 0
              },
              {
                "sql_name": "CREATE_TIME",
                "domino_formula": "OPINIONTIME",
                "jdbc_type": "TIMESTAMP",
                "scale_length": 0
              },
              {
                "sql_name": "LAST_UPDATE_TIME",
                "domino_formula": "OPINIONTIME",
                "jdbc_type": "TIMESTAMP",
                "scale_length": 0
              },
              {
                "sql_name": "OPINION_SHOW",
                "domino_formula": "\"1\"",
                "jdbc_type": "VARCHAR",
                "scale_length": 0
              }
            ]
          }
        ]
      },
      "sql_table": "SFTOA.EGOV_GOODS_APPLY",
      "sql_update_primary_key": {
        "sql_name": "DOMINO_ID",
        "domino_formula": "@Text(@DocumentUniqueID)",
        "jdbc_type": "VARCHAR",
        "scale_length": 0
      },
      "sql_field_others": [
		{
          "sql_name": "ID",
          "domino_formula": "@Text(@DocumentUniqueID)",
          "jdbc_type": "VARCHAR",
          "scale_length": 0
        },
        {
          "sql_name": "DOMINO_ID", 
          "domino_formula": "@Text(@DocumentUniqueID)",
          "jdbc_type": "VARCHAR",
          "scale_length": 0
        },
        {
          "sql_name": "APPLY_DATE",
          "domino_formula": "RegDate",
          "jdbc_type": "VARCHAR",
          "scale_length": 0
        },
        {
          "sql_name": "BUSINESS_SUBJECT",
          "domino_formula": "Subject",
          "jdbc_type": "VARCHAR",
          "scale_length": 0
        },
        {
          "sql_name": "APPLY_DEPT_NAME",
          "domino_formula": "UseDeptTitle",
          "jdbc_type": "VARCHAR",
          "scale_length": 0
        },
        {
          "sql_name": "USER_NAME",
          "domino_formula": "Sqr",
          "jdbc_type": "VARCHAR",
          "scale_length": 0
        },
        {
          "sql_name": "ROOM",
          "domino_formula": "Room",
          "jdbc_type": "VARCHAR",
          "scale_length": 0
        },
        {
          "sql_name": "SYSTEM_NO",
          "domino_formula": "\"XCOA\"",
          "jdbc_type": "VARCHAR"
        },
        {
          "sql_name": "FLOW_STATUS",
          "domino_formula": "\"finish\""
        },
        {
          "sql_name": "PASS_READER",
		  "domino_formula": "ret:=@Name([CN];@Trim(@Unique(C_UsedReader:C_UserReader:C_UserAgentReader:C_AdminReader:C_AdminReader)));\nret:=@DbLookup(\"\":\"NoCache\"; @ServerName:\"uumsUser.nsf\";\"UserMapper\"; ret; \"userNo\"; [FAILSILENT]);\n@If(@IsError(ret)|ret=\"\";\"[]\";\"[{\\\"readerNo\\\":\\\"\"+@Implode(ret;\"\\\"},{\\\"readerNo\\\":\\\"\")+\"\\\"}]\");",
		  "jdbc_type": "VARCHAR",
          "scale_length": 0
        }
      ]
    }
  ]
}